<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://gklearnstudy.in/style.css">

    <title>Admin Panel with Toolbar and Preview</title>
    <style>
        body {
            font-family: Arial, sans-serif;
           
            display: flex;
            justify-content: center;
            align-items: flex-start;
            flex-direction: column;
            margin: 0;
        }
        .header {
            width: 98%;
            background-color: #007bff;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: -5px;
            left: 0;
           
        } #themeToggle {z-index: 11;position: fixed;top: 12px;right: 100px;padding: 0px 0px;border: none;cursor: pointer;border-radius: 50%;font-size: 16px;display: flex;align-items: center;gap: 10px;}

        .header button {
            padding: 10px 15px;
            background-color: white;
            color: #007bff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .header button:hover {
            background-color: #f0f0f0;
        }
        .admin-container {
           
           
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            width:100%;
            margin-top: 80px;
            text-align: center;
        }

input[type=text] {
    background-image: none};
        #postContent {
            display: none;
            margin-bottom: 20px;
        }
        button {
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .posts {
          
            margin-top: 20px;
            text-align: left;
        }
        .post {
         
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
      
        #toolbar {
            margin-top: 20px;
            margin-bottom: 10px;
        }
        #toolbar button {
            margin-right: 5px;
        }
        input[type="text"] {
           
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .posts {
            margin-top: 20px;
        }
        .generatedHTML {text-align:left;
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
           
        } 
        postcontent{display:none;}
        .status {display:inline-block;
            color: gray;
            font-size: 12px;
        }
        
     
    </style>
</head>
<body>

    <div class="header">
        <button id="createPostButton">Create Post</button>
        <button style="margin-left: 52%;" id="logoutButton">Logout</button>
    </div>

    <div class="admin-container">
       

        <!-- Title Input -->
        <input type="text" id="postTitle" placeholder="Enter Post Title" style="display: none;" />
        <input type="text" id="metaKeywords" placeholder="Enter Keywords (comma separated)" style="display: none;" />
        <input type="text" id="metaAuthor" placeholder="Enter Author Name" style="display: none;" />


     <div class="editor-toolbar">
    <button onclick="undo()">Undo</button>
    <button onclick="redo()">Redo</button>
</div>



        <div id="toolbar" style="display: none;">
            <button onclick="execCmd('bold')">Bold</button>
            <button onclick="execCmd('justifyLeft')">Left</button>
            <button onclick="execCmd('justifyCenter')">Center</button>
            <button onclick="execCmd('justifyRight')">Right</button>
            <button onclick="insertContentDiv1()"><div class="color-content1">Heading 1</div></button>
             <button onclick="insertContentDiv2()"><div class="color-content1">Heading 2</div></button>
                   
            
        </div>

        <!-- Content editor -->
        <div id="editorContainer" contenteditable="true" id="postContent" style="text-align:left;margin:5px; padding: 10px; border: 1px solid #ddd; min-height: 150px; margin-top: 10px; display: none;"></div>

        <!-- Generated HTML Display -->
        <div id="generatedHTML" class="generatedHTML" style="display: none;"></div>

        <!-- Buttons -->
        <button id="submitPost" style="display: none;">Submit Post</button>
        <button id="previewPost" style="display: none;">Preview in New Tab</button>

        <!-- Posts Display -->
        <div id="posts" class="posts"></div>
    </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.0/beautify-html.min.js"></script>
    <script>
        let undoStack = [];
        let redoStack = [];

        // Function to save state - you can call this function manually whenever needed
        function saveState(state) {
            undoStack.push(state);
            redoStack = []; // clear redoStack when a new state is saved
        }

        // Undo function
        function undo() {
            if (undoStack.length > 1) {
                redoStack.push(undoStack.pop()); // move current state to redoStack
                let prevState = undoStack[undoStack.length - 1];
                applyState(prevState); // apply the last saved state
            }
        }

        // Redo function
        function redo() {
            if (redoStack.length > 0) {
                let nextState = redoStack.pop();
                undoStack.push(nextState); // move state back to undoStack
                applyState(nextState); // apply the redo state
            }
        }

        // Apply the state to any element or logic (this can be customized)
        function applyState(state) {
            console.log("Applying state:", state);
            // Example: set the innerHTML of an element, or any other operation
            // document.getElementById('yourElementId').innerHTML = state;
        }

        // Add event listeners to buttons
        document.getElementById("undoBtn").addEventListener('click', undo);
        document.getElementById("redoBtn").addEventListener('click', redo);

        // Example to save a state (this should be called manually in your logic)
        saveState("Initial State"); // Example: First saved state
        saveState("Modified State 1"); // Example: Another saved state
    </script>

   <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-auth.js";
    import { getFirestore, collection, addDoc, getDocs, query, where, doc, updateDoc, orderBy } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBFH1SGy9Gc7JJZhTLv2bktvTE4q_mSU3M",
        authDomain: "gklearnstudyy.firebaseapp.com",
        projectId: "gklearnstudyy",
        storageBucket: "gklearnstudyy.appspot.com",
        messagingSenderId: "256328121620",
        appId: "1:256328121620:web:6de8ba9ae25e83c4875601"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    let currentEditPostId = null;

    document.addEventListener('DOMContentLoaded', function () {
        const logoutButton = document.getElementById('logoutButton');
        const saveDraftButton = document.createElement('button');
        saveDraftButton.innerText = 'Save as Draft';
        saveDraftButton.style.display = 'none';
        document.body.appendChild(saveDraftButton);

        const submitButton = document.getElementById('submitPost');
        const createPostButton = document.getElementById('createPostButton');
        const postsContainer = document.getElementById('posts');
        const editorContainer = document.getElementById('postContent');
        const generatedHTML = document.getElementById('generatedHTML');
        const previewButton = document.getElementById('previewPost');
        const editPreviewButton = document.createElement('button');
        editPreviewButton.id = 'editpreviewPost';
        editPreviewButton.innerText = 'Preview in New Tab';
        editPreviewButton.style.display = 'none';
        document.body.appendChild(editPreviewButton);
        const postTitleInput = document.getElementById('postTitle');
        const metaKeywordsInput = document.getElementById('metaKeywords');
        const metaAuthorInput = document.getElementById('metaAuthor');

        loadPosts();

        onAuthStateChanged(auth, (user) => {
            if (!user) {
                window.location.href = 'login.html';
            }
        });

        logoutButton.addEventListener('click', handleLogout);

        createPostButton.addEventListener('click', function () {
            resetEditor();
            postTitleInput.style.display = 'block';
             metaKeywordsInput.style.display = 'block';
            metaAuthorInput.style.display = 'block';
           
            editorContainer.style.display = 'block';
            submitButton.style.display = 'inline-block';
            previewButton.style.display = 'inline-block';
            saveDraftButton.style.display = 'inline-block';
            editPreviewButton.style.display = 'none';
            document.getElementById('toolbar').style.display = 'block';
            postsContainer.style.display = 'none';
        });

       previewButton.addEventListener('click', function () {
    const content = editorContainer.innerHTML;  // Get content from the editor
    const title = postTitleInput.value;         // Get the post title input

    // Check if content and title are filled in
    if (content && title) {
        const metaKeywords = metaKeywordsInput.value;  // Get meta keywords input
        const metaAuthor = metaAuthorInput.value;      // Get meta author input
        
        // Generate dynamic tags (style and script)
        const scriptTags = generatepriviewDynamicScriptTags(title);  // Get script tags
        const styleTag = generatepriviewDynamicStyleTag(title);      // Get style tag

        // Open the preview window
        const previewWindow = window.open('', '_blank');
        
        // Write the HTML into the preview window with proper structure
        previewWindow.document.write(`
         <!DOCTYPE html>
      <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>${title}</title>
                <meta name="description" content="${metaKeywords}">
                <meta name="author" content="${metaAuthor}">
               ${styleTag}
           
            </head>
            <body>
                <h1>${title}</h1>
                ${content}  
                ${scriptTags} 
            </body>
            </html>
        `);
        
        // Close the document stream to render the content
        previewWindow.document.close();
    } else {
        alert('Please fill in the title and content to preview.');
    }
});


       editPreviewButton.addEventListener('click', function () {
    const content = editorContainer.innerHTML;  // Get content from the editor
    const title = postTitleInput.value;         // Get the post title input

    // Check if content and title are filled in
    if (content && title) {
        const metaKeywords = metaKeywordsInput.value;  // Get meta keywords input
        const metaAuthor = metaAuthorInput.value;      // Get meta author input
        
        // Generate dynamic tags (style and script)
        const scriptTags = generatepriviewDynamicScriptTags(title);  // Get script tags
        const styleTag = generatepriviewDynamicStyleTag(title);      // Get style tag
        const previewWindow = window.open('', '_blank');
        
        // Write the HTML into the preview window with proper structure
        previewWindow.document.write(`
        <!DOCTYPE html>
      <html lang="en">
       
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>${title}</title>
                <meta name="description" content="${metaKeywords}">
                <meta name="author" content="${metaAuthor}">
                
                ${styleTag}  <!-- CSS link is placed inside the head -->
            </head>
            <body>
                 <main class="container">
    <form id="searchForm" onsubmit="performSearch(event);">
      <div class="search-container">
        <span class="search-icon" id="searchIcon">
          <span style="display: inline-block; transform: rotate(270deg);">⌕</span>
        </span>
        <input type="text" id="searchInput" placeholder="Enter your search term" autocomplete="off"
          oninput="updateSuggestions(event)">
        <button type="button" id="searchButton" onclick="performSearch()">Search</button>
      </div>
      <div id="suggestions" class="suggestions-list"></div>
    </form>

    <div id="searchModal1" class="modal1" onclick="closeModal1(event)">
      <div class="modal1-content">
        <span class="close" onclick="closeModal1(event)">&times;</span>
        <h2>Search Results</h2>
        <div id="results"></div>
      </div>
    </div>
  </main>
                ${content}   <!-- Dynamic content is injected here -->
                ${scriptTags}  <!-- Script is placed just before the closing body tag -->
            </body>
            </html>
        `);
        
        // Close the document stream to render the content
        previewWindow.document.close();
    } else {
        alert('Please fill in the title and content to preview.');
    }
});


        function execCmd(command, value = null) {
            document.execCommand(command, false, value);
            updateOutput();
        }

   
        function updateOutput() {
            const content = editorContainer.innerHTML;   // Get content from the editor
            const title = postTitleInput.value;          // Get the post title input
            const metaKeywords = metaKeywordsInput.value;  // Get meta keywords input
            const metaAuthor = metaAuthorInput.value;    // Get meta author input
            
            // Generate dynamic tags
            const scriptTags = generateDynamicScriptTags(title);  // Get script tags
            const styleTag = generateDynamicStyleTag(title);      // Get style tag

            // Raw HTML structure with dynamic variables
            const rawHTML = `
            <!DOCTYPE html>
              <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>${title}</title>
                    <meta name="description" content="${metaKeywords}">
                    <meta name="author" content="${metaAuthor}">
                    ${styleTag}
                </head>
                <body>
                  <main class="container">
                    <form id="searchForm" onsubmit="performSearch(event);">
                      <div class="search-container">
                        <span class="search-icon" id="searchIcon">
                          <span style="display: inline-block; transform: rotate(270deg);">⌕</span>
                        </span>
                        <input type="text" id="searchInput" placeholder="Enter your search term" autocomplete="off"
                          oninput="updateSuggestions(event)">
                        <button type="button" id="searchButton"onclick="performSearch()">Search</button>
                      </div>
                      <div id="suggestions" class="suggestions-list"></div>
                    </form>

                    <div id="searchModal1" class="modal1" onclick="closeModal1(event)">
                      <div class="modal1-content">
                        <span class="close" onclick="closeModal1(event)">&times;</span>
                        <h2>Search Results</h2>
                        <div id="results"></div>
                      </div>
                    </div>
                  </main>
                  ${content}
                  ${scriptTags}
                </body>
              </html>
            `;

            // Format the raw HTML using js-beautify
            const formattedHTML = html_beautify(rawHTML, {
                indent_size: 4,        // Set indentation to 2 spaces
                preserve_newlines: true, // Keep existing newlines as they are
                max_preserve_newlines: 2 // Maximum 2 consecutive newlines preserved
            });

            // Set the formatted HTML inside the generatedHTML container
            generatedHTML.innerText = formattedHTML;

            // Ensure the generated HTML is displayed
            generatedHTML.style.display = 'block';
        }// Undo and Redo functionality for content and input text fields
function undo() {
    document.execCommand('undo', false, null); // Perform undo
}

function redo() {
    document.execCommand('redo', false, null); // Perform redo
}

// Example functions for search (as placeholders)
function performSearch(event) {
    // Example search functionality
    console.log("Performing search...");
}

function updateSuggestions(event) {
    // Example suggestion updating
    console.log("Updating suggestions...");
}

function closeModal1(event) {
    // Example modal close functionality
    console.log("Closing modal...");
}

        // Automatically update output on content change
        editorContainer.addEventListener('input', updateOutput);
        postTitleInput.addEventListener('input', updateOutput);
        metaKeywordsInput.addEventListener('input', updateOutput);
        metaAuthorInput.addEventListener('input', updateOutput);

          // Dummy functions to avoid errors
        function generateDynamicScriptTags(title) {
            return `<script src="path/to/script.js"><\/script>`; // Replace with your script
        }
        
        function generateDynamicStyleTag(title) {
            return `<link rel="stylesheet" href="path/to\/style.css">`; // Replace with your stylesheet
        }

        
        async function createPost(status) {
            const user = auth.currentUser;
            const postContent = editorContainer.innerHTML;
            const postTitle = postTitleInput.value;
             const metaKeywords = metaKeywordsInput.value;
            const metaAuthor = metaAuthorInput.value;


            if (await isTitleTaken(postTitle) && !currentEditPostId && status !== "none") {
                alert("Post title already taken. Please choose another.");
                return;
            }

            if (postContent && postTitle && user) {
                try {
                    const postData = {
                        title: postTitle,
                        content: postContent,
                        status: status,
                        userId: user.uid,
                        userName: user.displayName || user.email,
                        createdAt: new Date(), // Timestamp for sorting
                         metaKeywords: metaKeywords,
                        metaAuthor: metaAuthor.split('@')[0], // Only take the part before @
                
                    };

                    if (currentEditPostId) {
                        await updateDoc(doc(db, "posts", currentEditPostId), postData);
                        if (status === "none") {
                            alert('Post has been saved as draft!');
                        } else {
                            alert('Post resubmitted successfully!');
                        }
                    } else {
                        await addDoc(collection(db, "posts"), postData);
                        if (status === "none") {
                            alert('Post saved successfully as draft!');
                        } else {
                            alert('Post submitted successfully!');
                        }
                    }

                    loadPosts();
                    resetEditor();
                } catch (error) {
                    console.error("Error adding/updating document: ", error);
                }
            } else {
                alert('Please provide both title and content.');
            }
        }

        submitButton.addEventListener('click', function() {
            createPost("Pending");
        });

        saveDraftButton.addEventListener('click', function() {
            createPost("none");
        });

        async function isTitleTaken(title) {
            const postsQuery = query(collection(db, "posts"), where("title", "==", title));
            const querySnapshot = await getDocs(postsQuery);
            return !querySnapshot.empty;
        }

 async function loadPosts() {
            const postsQuery = query(collection(db, "posts"), orderBy("createdAt", "desc")); // Order by creation time
            const postsSnapshot = await getDocs(postsQuery);
            postsContainer.innerHTML = '';

            const user = auth.currentUser;
            const isAdmin = user.email === "admin@example.com";

            postsSnapshot.forEach((doc) => {
                const post = doc.data();
                const postElement = document.createElement('div');
                postElement.className = 'post';
                
 if (isAdmin || post.userId === user.uid) {
                    const previewButton = document.createElement('button');
                    previewButton.innerText = 'Preview';
                    previewButton.onclick = function () {
                        const previewWindow = window.open('', '_blank');
                        const dynamicTags = generateDynamicTags(post.title);
                        previewWindow.document.write(`<h1>${post.title}</h1>${dynamicTags}${post.content}`);
                        previewWindow.document.close();
                    };
                    const editButton = document.createElement('button');
                    editButton.innerText = 'Edit';
                    editButton.onclick = function () {
                        currentEditPostId = doc.id;
                        postTitleInput.value = post.title;
                         metaKeywordsInput.style.display = 'block';
                         metaAuthorInput.style.display = 'block';
           
                        editorContainer.innerHTML = post.content;
                        postTitleInput.style.display = 'block';
                        editorContainer.style.display = 'block';
                        submitButton.style.display = 'inline-block';
                        saveDraftButton.style.display = 'inline-block';
                        editPreviewButton.style.display = 'inline-block';
                        previewButton.style.display = 'none';
                        postsContainer.style.display = 'none';
                        document.getElementById('toolbar').style.display = 'block';
                    };

                    postElement.innerHTML = 
                        `<h3>${post.title}</h3>
                        <postcontent>${post.content}</postcontent>
                        <status>Status: ${post.status === "none" ? "Draft" : post.status}</status>
                        `; 
                    postElement.appendChild(previewButton);
                    postElement.appendChild(editButton);
                    postsContainer.appendChild(postElement);
                    previewButton.style.float = 'right';
                    previewButton.style.marginTop = '-10px';
                    previewButton.style.padding = '8px';
                    editButton.style.float = 'right';
                    editButton.style.marginTop = '-10px';
                    editButton.style.marginRight = '5px';
                    editButton.style.padding = '8px';
                }
            });

            if (postsContainer.innerHTML === '') {
                postsContainer.innerHTML = '<p>No posts found.</p>';
            }
        }

        function resetEditor() {
            currentEditPostId = null;
            editorContainer.innerHTML = '';
            postTitleInput.value = '';
             metaKeywordsInput.style.display = 'none';
            metaAuthorInput.style.display = 'none';
           generatedHTML.style.display = 'none';
       
            document.getElementById('toolbar').style.display = 'none';
            editorContainer.style.display = 'none';
            submitButton.style.display = 'none';
            saveDraftButton.style.display = 'none'; 
            editPreviewButton.style.display = 'none';
            previewButton.style.display = 'none';
            postTitleInput.style.display = 'none';
            postsContainer.style.display = 'block';
        }

        async function handleLogout() {
            await signOut(auth);
            window.location.href = 'login.html';
        }

       
      function generateDynamicScriptTags(title) {
    const prefix = title.split('/').map(() => '..').join('/');  // Generate the correct prefix based on the title
          
    const scriptTag1 = `<script src="${prefix}/script.js"><\/script>`;
    const scriptTag2 = `<script src="${prefix}/search.js"><\/script>`;
    const scriptTag3 = `<script src="${prefix}/menusearch.js"><\/script>`;
    
    // Return all script tags
    return `${scriptTag1}\n${scriptTag2}\n${scriptTag3}`;
}

// Function to generate dynamic style link tag based on title
function generateDynamicStyleTag(title) {
    const prefix = title.split('/').map(() => '..').join('/');  // Generate the correct prefix based on the title
    
    const styleTag = `<link rel="stylesheet" href="${prefix}/style.css">`;
    
    // Return the style tag
    return styleTag;
}

function generateDynamicTags(title) {
            const prefix = title.split('/').map(() => '..').join('/');
            const scriptTag1 = `<script src="https://gklearnstudy.in/${prefix}/script.js"><\/script>`;
            const scriptTag2 = `<script src="https://gklearnstudy.in/${prefix}/search.js"><\/script>`;
            const scriptTag3 = `<script src="https://gklearnstudy.in/${prefix}/menusearch.js"><\/script>`;
            const styleTag = `<link rel="stylesheet" href="https://gklearnstudy.in/${prefix}/style.css">`;

            return `${styleTag}\n${scriptTag1}\n${scriptTag2}\n${scriptTag3}`;
        }
        

              function generatepriviewDynamicScriptTags(title) {
    const prefix = title.split('/').map(() => '..').join('/');  // Generate the correct prefix based on the title
          
    const scriptTag1 = `<script src="https://gklearnstudy.in${prefix}/script.js"><\/script>`;
    const scriptTag2 = `<script src="https://gklearnstudy.in${prefix}/search.js"><\/script>`;
    const scriptTag3 = `<script src="https://gklearnstudy.in/${prefix}/menusearch.js"><\/script>`;
    
    // Return all script tags
    return `${scriptTag1}\n${scriptTag2}\n${scriptTag3}`;
}

// Function to generate dynamic style link tag based on title
function generatepriviewDynamicStyleTag(title) {
    const prefix = title.split('/').map(() => '..').join('/');  // Generate the correct prefix based on the title
    
    const styleTag = `<link rel="stylesheet" href="https://gklearnstudy.in/${prefix}/style.css">`;
    
    // Return the style tag
    return styleTag;
}
        async function handleLogout() {
            try {
                await signOut(auth);
                window.location.href = 'login.html';
            } catch (error) {
                console.error("Error logging out: ", error);
            }
        }
    });
</script>


<script>

 function insertContentDiv1() {
            var html = `<h1 id="${document.getSelection()}"><b class="color-content1">${document.getSelection()}</b></h1>`;
                document.execCommand('insertHTML', false, html);
            updateOutput();
            moveCursorToEnd();
        }

        function insertContentDiv2() {
            var html = `<h2 id="${document.getSelection()}"><b class="color-content1">${document.getSelection()}</b></h1>`;
                document.execCommand('insertHTML', false, html);
            updateOutput();
            moveCursorToEnd();
        }

    
    function execCmd(command, value = null) {
        document.execCommand(command, false, value);
        updateOutput();
    }

    function updateOutput() {
        const editorContent = document.getElementById('editor').innerHTML;
        document.getElementById('output').value = editorContent;
    }

    document.getElementById('editor').addEventListener('input', updateOutput);
    
</script>
<script>






// Create elements
const body = document.body;
const themeToggle = document.createElement('button');
const themeIcon = document.createElement('span');
const sunIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
const moonIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');

// Set attributes and properties
themeToggle.id = 'themeToggle';
themeToggle.textContent = '';
themeIcon.id = 'themeIcon';

sunIcon.setAttribute('id', 'sunIcon');
sunIcon.setAttribute('fill', 'yellow');
sunIcon.setAttribute('version', '1.1');
sunIcon.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
sunIcon.setAttribute('viewBox', '-87.6 -87.6 1051.20 1051.20');
sunIcon.setAttribute('xml:space', 'preserve');
sunIcon.setAttribute('stroke', 'red');
sunIcon.setAttribute('stroke-width', '20.00876');
sunIcon.innerHTML = '<g><circle cx="438" cy="438" r="246"></circle><path d="M420.5,163h35c11.046,0,20-8.954,20-20V20c0-11.046-8.954-20-20-20h-35c-11.046,0-20,8.954-20,20v123C400.5,154.046,409.454,163,420.5,163z"></path><path d="M713,420.5v35c0,11.046,8.954,20,20,20h123c11.046,0,20-8.954,20-20v-35c0-11.046-8.954-20-20-20H733C721.954,400.5,713,409.454,713,420.5z"></path><path d="M455.5,876c11.046,0,20-8.954,20-20V733c0-11.046-8.954-20-20-20h-35c-11.046,0-20,8.954-20,20v123c0,11.046,8.954,20,20,20H455.5z"></path><path d="M20,475.5h123c11.046,0,20-8.954,20-20v-35c0-11.046-8.954-20-20-20H20c-11.046,0-20,8.954-20,20v35C0,466.546,8.954,475.5,20,475.5z"></path><path d="M644.829,255.92c7.811,7.81,20.474,7.811,28.284,0l86.975-86.974c7.811-7.812,7.811-20.474,0-28.284l-24.749-24.749c-7.811-7.811-20.474-7.811-28.284,0l-86.975,86.974c-7.812,7.81-7.812,20.474,0,28.284L644.829,255.92z"></path><path d="M735.338,760.087l24.749-24.749c7.811-7.81,7.811-20.474,0-28.284l-86.975-86.974c-7.812-7.811-20.475-7.811-28.284,0l-24.749,24.749c-7.812,7.811-7.812,20.474,0,28.284l86.975,86.974C714.865,767.898,727.528,767.898,735.338,760.087z"></path><path d="M168.946,760.087l86.975-86.974c7.812-7.811,7.812-20.475,0-28.284l-24.749-24.749c-7.811-7.811-20.474-7.811-28.284,0l-86.975,86.974c-7.811,7.812-7.811,20.475,0,28.284l24.749,24.749C148.472,767.898,161.135,767.898,168.946,760.087z"></path><path d="M202.887,255.92c7.811,7.811,20.474,7.81,28.284,0l24.749-24.749c7.812-7.81,7.812-20.474,0-28.284l-86.975-86.974c-7.811-7.811-20.474-7.811-28.284,0l-24.749,24.749c-7.811,7.81-7.811,20.474,0,28.284L202.887,255.92z"></path></g>';

moonIcon.setAttribute('id', 'moonIcon');
moonIcon.setAttribute('viewBox', '0 0 48.00 48.00');
moonIcon.setAttribute('fill', '#ffffff');
moonIcon.setAttribute('stroke', '#000000');
moonIcon.style.display = 'none';
moonIcon.innerHTML = '<path d="m32.8,29.3c-8.9-.8-16.2-7.8-17.5-16.6-.3-1.8-.3-3.7,0-5.4.2-1.4-1.4-2.3-2.5-1.6C6.3,9.7,2.1,16.9,2.5,25c.5,10.7,9,19.5,19.7,20.4,10.6.9,19.8-6,22.5-15.6.4-1.4-1-2.6-2.3-2-2.9,1.3-6.1,1.8-9.6,1.5Z"></path>';

// Append icons to themeIcon
themeIcon.appendChild(sunIcon);
themeIcon.appendChild(moonIcon);

// Append themeIcon to themeToggle
themeToggle.appendChild(themeIcon);

// Append themeToggle to body
body.appendChild(themeToggle);

// Function to switch theme
function switchTheme() {
    let currentTheme = localStorage.getItem('theme');

    if (currentTheme === 'dark') {
        document.documentElement.removeAttribute('data-theme');
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
        localStorage.setItem('theme', 'light');
    } else {
        document.documentElement.setAttribute('data-theme', 'dark');
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
        localStorage.setItem('theme', 'dark');
    }
}

// Check saved theme on page load
document.addEventListener('DOMContentLoaded', () => {
    let savedTheme = localStorage.getItem('theme');

    if (savedTheme === 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark');
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
    } else {
        document.documentElement.removeAttribute('data-theme');
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
    }
});

// Toggle theme on button click
themeToggle.addEventListener('click', switchTheme);








// Create the header element
const header = document.createElement('header');
header.className = 'header';
header.id = 'header';

// Create the nav element
const nav = document.createElement('nav');
nav.className = 'navbar container1';

// Create the logo container1 div
const logocontainer1 = document.createElement('div');
logocontainer1.className = 'logo-container1';

logocontainer1.style.borderRadius = '50%';
logocontainer1.style.background = 'white';
logocontainer1.style.position = 'relative';
logocontainer1.style.overflow = 'hidden';

// Create the demo2 div with SVG inside it
const demo2 = document.createElement('div');
demo2.className = 'demo2';
demo2.style.position = 'relative';
demo2.style.width = '200%';
demo2.style.height = '0px';


// SVG code
demo2.innerHTML = `
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
    <defs>
        <path id="gentle-wave" class="st0" d="M-160,35.6 c 30,0,58-6.6,88-6.6 s58,6.6,88,6.6s58-6.6,88-6.6s58,6.6,88,6.6V59h-352V35.6z"></path>
    </defs>
    <g class="parallax">
        <use style="fill:#c0a4fb;fill-opacity: 1;" xlink:href="#gentle-wave" x="48" y="0"></use>
        <use style="fill:#641ef9;fill-opacity: 1;" xlink:href="#gentle-wave" x="48" y="0"></use>
    </g>
</svg>
`;

// Create the logo text div
const logoText = document.createElement('div');
logoText.className = 'logo-text';
logoText.style.position = 'absolute';
logoText.style.top = '12%';
logoText.style.width = '100%';
logoText.style.color = 'red';
logoText.style.textAlign = 'center';
logoText.style.fontFamily = 'Arial, sans-serif';
logoText.style.animation = 'fadeInScale 2s ease-in-out forwards';
logoText.style.opacity = '0';
logoText.style.transform = 'scale(0.8)';

// Logo text content (h1 and p)
logoText.innerHTML = `
    <h1 style="font-size: 20px; margin: 0;">GK</h1>
    <p style="color: green; font-size: 9px; margin: 0;">Learn Study</p>
`;

// Append the demo2 and logoText to logocontainer1
logocontainer1.appendChild(demo2);
logocontainer1.appendChild(logoText);

// Create the brand link
const brandLink = document.createElement('a');
brandLink.href = './index.html';
brandLink.className = 'brand';
brandLink.appendChild(logocontainer1); // Append the logo container1 to the brand link

// Append the brand link to the nav
nav.appendChild(brandLink);



// Function to apply styles based on media query
function applyResponsiveStyles() {
    const minMax900 = window.matchMedia('(min-width: 320px) and (max-width: 900px)');
    const max320 = window.matchMedia('(max-width: 320px)');
    const min900 = window.matchMedia('(min-width: 900px)');
    
    if (max320.matches) {
        // Apply styles for screens with a max width of 320px
       
        logocontainer1.style.width = '25px';
        logocontainer1.style.height = '25px';
        logoText.querySelector('h1').style.fontSize = '9px';
        logoText.querySelector('p').style.fontSize = '3px';
        demo2.style.top = '40%';
        
    } else if (minMax900.matches) {
        // Apply styles for screens between 320px and 720px
        
       logocontainer1.style.width = '35px';
       logocontainer1.style.height = '35px';
       logoText.querySelector('h1').style.fontSize = '12px';
       logoText.querySelector('p').style.fontSize = '4px';
       demo2.style.top = '40%';
        
    } else if (min900.matches) {
        // Apply styles for screens with a min width of 720px
        logocontainer1.style.width = '45px';
        logocontainer1.style.height = '45px';
        logoText.querySelector('h1').style.fontSize = '20px';
        logoText.querySelector('p').style.fontSize = '5px';
        demo2.style.top = '60%';
    }
}

// Initial call to apply styles
applyResponsiveStyles();

// Add event listener to handle changes in viewport size
window.addEventListener('resize', applyResponsiveStyles);

// Add animation styles using JavaScript
const style = document.createElement('style');
style.textContent = `
    @keyframes waveAnimateB {
        0% {
            transform: translate3d(-90px, 0, 0);
        }
        100% {
            transform: translate3d(85px, 0, 0);
        }
    }

    .demo2 .parallax > use {
        animation: waveAnimateB 14s linear infinite;
    }

    .demo2 .parallax > use:nth-child(1) {
        animation-delay: -2s;
        animation-duration: 7s;
        fill-opacity: 0.2;
    }

    .demo2 .parallax > use:nth-child(2) {
        animation-delay: -3s;
        animation-duration: 12s;
        fill-opacity: 1;
    }
`;
document.head.appendChild(style);

</script>



</body>
</html>
